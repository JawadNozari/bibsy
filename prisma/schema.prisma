generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "postgresql"
  url      = env("DATABASE_URL")
}

model User {
  id       Int             @id @default(autoincrement())
  admin    Boolean         @default(false)
  password String?
  name     String?
  email    String          @unique
  phone    String          @unique @db.VarChar(13)
  image    String          @db.VarChar(255)
  borrowed borrowedBooks[]
  missing  missingBooks[]
  returned returnedBooks[]
}

model Book {
  id        Int             @id @default(autoincrement())
  title     String?
  author    String?
  published DateTime        @default(now())
  regDate   DateTime        @default(now())
  isbn      String?
  invNr     Int
  available Boolean         @default(true)
  borrowed  borrowedBooks[]
  missing   missingBooks[]
  returned  returnedBooks[]
}

model missingBooks {
  id      Int      @id @default(autoincrement())
  regDate DateTime @default(now())
  note    String   @db.VarChar(255)
  bookId  Int?
  userId  Int?
  Book    Book?    @relation(fields: [bookId], references: [id])
  User    User?    @relation(fields: [userId], references: [id])
}

model borrowedBooks {
  id      Int      @id @default(autoincrement())
  regDate DateTime @default(now())
  note    String   @db.VarChar(255)
  bookId  Int?
  userId  Int?
  Book    Book?    @relation(fields: [bookId], references: [id])
  User    User?    @relation(fields: [userId], references: [id])
}

model returnedBooks {
  id      Int      @id @default(autoincrement())
  regDate DateTime @default(now())
  bookId  Int?
  userId  Int?
  Book    Book?    @relation(fields: [bookId], references: [id])
  User    User?    @relation(fields: [userId], references: [id])
}
